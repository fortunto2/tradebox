# tradebox
https://www.tradingview.com/chart/XZ6jyBi4/

https://docs.google.com/spreadsheets/d/1g1U8zsxZvC6TDC3TF3Krb2pm9n2MaENUmvOtpRWRloE/edit?gid=0#gid=0


prefect config set PREFECT_API_URL=http://127.0.0.1:4200/api
prefect config set PREFECT_UI_URL=http://20.243.22.4:4200/api
prefect server start
prefect config set PREFECT_API_DATABASE_CONNECTION_URL="postgresql+asyncpg://postgres:rust_admin@localhost:6432/prefect"
prefect config set PREFECT_API_DATABASE_CONNECTION_URL="sqlite+aiosqlite:///./prefect.db"


1. Приходит вебхук
2. Проверка позиции
3. Создание ордера по маркету
4. Создание сетки ордеров
5. Создание первого лимитного ордера
6. Ожидание ордера


Всегда ордера в позиции Усредняющий(LONG-BUY) усредняют, но не закрывают. 
И мы ставим вместе с ним Тайк-профит(LONG-SELL) он закрывает позицию. 
После позиции закрытия проверяются какие лимитные ордера остались, и закрываю все ордера кроме SHORT SELL(страховку оставить)


10 июля. 
Надо реализовать создание лимитного стоп ордера. Который потом будет открывать позицию. 
1. Создание ордера
2. Ожидание в вебсокетах
3. Проверка ордера

11 июля.

После тейкрофит по лонгу.
все закрываем!

Если пнл сработал, то тоже закрываем все позиции. 
Все закрываем. 

Тейкпрофиты перенести через трейн. 

Трейлинг
1. есть цена 100 рублей без убытка
2. у нас есть трейлинг 0.3 процента - цена активации, при достижение 100.30 копее, ставим лимитный ордер на 100.20 копеек
3. трейлинг степ - 100.40 копеек, снимаем с отметки 100.20 копеек и ставим 100.30 копеек


21 июля

1. словарь чтоб хранить монитор цены
2. выставление ордеров на вебсокетах
3. флоу сделтаь ассинхронно - не получается, и не понятно что дает
